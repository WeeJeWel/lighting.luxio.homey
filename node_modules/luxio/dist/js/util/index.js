'use strict';

var tinygradient = require('tinygradient');

function createGradient(_ref) {
	var source = _ref.source,
	    pixels = _ref.pixels;

	if (!Array.isArray(source)) throw new Error('Invalid type for createGradient, expected: Array');

	// add # to color
	var colors = source.map(function (color) {
		if (color.charAt(0) !== '#') return '#' + color;
		return color;
	});

	// at least 2 colors
	if (colors.length === 1) colors.push(colors[0]);

	return tinygradient(colors).rgb(pixels).map(function (color) {
		return color.toString('hex').substring(1).toUpperCase();
	});
}

/*
	Get a color temperature, based on cool (0) or warm (1)
*/
function getColorTemperature(temperature) {
	if (temperature < 0 || temperature > 1) throw new Error('Color Temperature is out of bounds');

	var gradient = tinygradient('#CCFBFD', '#FFFFFF', '#FFDA73').hsv(99);
	var color = gradient[Math.floor(temperature * 98)];
	return color.toHexString().substring(1) // remove #
	.toUpperCase();
}

module.exports = {
	createGradient: createGradient,
	getColorTemperature: getColorTemperature
};

if (typeof window !== 'undefined') {
	module.exports.fetch = require('./fetch.js');
} else {
	module.exports.fetch = require('node-fetch');
}